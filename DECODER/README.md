## Выложена версия release_v1 
# RISC-V Instruction Table (таблица из документации)

## Load Instructions

| **Instruction** | **Encoding**                              | **Binary**        |
|------------------|------------------------------------------|-------------------|
| **LB**          | `imm[11:0] rs1 000 rd 0000011`           | `00000000000000011` |
| **LH**          | `imm[11:0] rs1 001 rd 0000011`           | `00000000010000011` |
| **LW**          | `imm[11:0] rs1 010 rd 0000011`           | `00000000100000011` |
| **LBU**         | `imm[11:0] rs1 100 rd 0000011`           | `00000001000000011` |
| **LHU**         | `imm[11:0] rs1 101 rd 0000011`           | `00000001010000011` |

## Store Instructions

| **Instruction** | **Encoding**                              | **Binary**        |
|------------------|------------------------------------------|-------------------|
| **SB**          | `imm[11:5] rs2 rs1 000 imm[4:0] 0100011` | `00000000000100011` |
| **SH**          | `imm[11:5] rs2 rs1 001 imm[4:0] 0100011` | `00000000010100011` |
| **SW**          | `imm[11:5] rs2 rs1 010 imm[4:0] 0100011` | `00000000100100011` |

## Shift Instructions

| **Instruction** | **Encoding**                              | **Binary**        |
|------------------|------------------------------------------|-------------------|
| **SLLI**        | `0000000 shamt rs1 001 rd 0010011`       | `00000000010010011` |
| **SRLI**        | `0000000 shamt rs1 101 rd 0010011`       | `00000001010010010` |
| **SRAI**        | `0100000 shamt rs1 101 rd 0010011`       | `01000001010010011` |
| **SLL**         | `0000000 rs2 rs1 001 rd 0110011`         | `00000000010110011` |
| **SRL**         | `0000000 rs2 rs1 101 rd 0110011`         | `00000001010110011` |
| **SRA**         | `0100000 rs2 rs1 101 rd 0110011`         | `01000001010110011` |

## Arithmetic Instructions

| **Instruction** | **Encoding**                              | **Binary**        |
|------------------|------------------------------------------|-------------------|
| **ADDI**        | `imm[11:0] rs1 000 rd 0010011`           | `00000000000010011` |
| **ADD**         | `0000000 rs2 rs1 000 rd 0110011`         | `00000000000110011` |
| **SUB**         | `0100000 rs2 rs1 000 rd 0110011`         | `01000000000110011` |

## Logical Instructions

| **Instruction** | **Encoding**                              | **Binary**        |
|------------------|------------------------------------------|-------------------|
| **XORI**        | `imm[11:0] rs1 100 rd 0010011`           | `00000001000010011` |
| **ORI**         | `imm[11:0] rs1 110 rd 0010011`           | `00000001100010011` |
| **ANDI**        | `imm[11:0] rs1 111 rd 0010011`           | `00000001110010011` |
| **XOR**         | `0000000 rs2 rs1 100 rd 0110011`         | `00000001000110011` |
| **OR**          | `0000000 rs2 rs1 110 rd 0110011`         | `00000001100110011` |
| **AND**         | `0000000 rs2 rs1 111 rd 0110011`         | `00000001110110011` |

## Compare Instructions

| **Instruction** | **Encoding**                              | **Binary**        |
|------------------|------------------------------------------|-------------------|
| **SLTI**        | `imm[11:0] rs1 010 rd 0010011`           | `00000000100010011` |
| **SLTIU**       | `imm[11:0] rs1 011 rd 0010011`           | `00000000110010011` |
| **SLT**         | `0000000 rs2 rs1 010 rd 0110011`         | `00000000100110011` |
| **SLTU**        | `0000000 rs2 rs1 011 rd 0110011`         | `00000000110110011` |

## RV32M Standart Extensions 

| **Instruction** | **Encoding**                              | **Binary**        |
|------------------|------------------------------------------|-------------------|
| **MUL**          | `0000001 rs2 rs1 000 rd 0110011`           | `00000010000110011` |
| **MULH**          | `0000001 rs2 rs1 001 rd 0110011`           | `00000010010110011` |
| **MULHSU**          | `0000001 rs2 rs1 010 rd 0110011`           | `00000010100110011` |
| **MULHU**         | `0000001 rs2 rs1 011 rd 0110011`           | `00000010110110011` |

## Описание типов сигналов
| **Сигнал**           | **Размер** | **Тип**       | **Описание**                                                                                                              |
|-----------------------|------------|---------------|--------------------------------------------------------------------------------------------------------------------------|
| `i_clk`              | 1 бит      | `in`          | Тактовый сигнал, используется для синхронизации работы устройства.                                                       |
| `i_rst`              | 1 бит      | `in`          | Сигнал сброса, активен при `1`. При активации все внутренние регистры и выходные сигналы сбрасываются в нули.            |
| `i_instr`            | 32 бита    | `in`          | Входная шина, содержащая инструкцию RISC-V с операционным кодом и полями.                                                |
| `o_r_type`           | 1 бит      | `out`         | Указывает, что текущая инструкция относится к типу `R` (арифметическая/логическая операция).                              |
| `o_s_type`           | 1 бит      | `out`         | Указывает, что текущая инструкция относится к типу `S` (запись данных в память).                                          |
| `o_i_type`           | 1 бит      | `out`         | Указывает, что текущая инструкция относится к типу `I` (загрузка или арифметика с немедленным значением).                 |
| `o_rs1`              | 5 бит      | `out`         | Номер первого исходного регистра (RS1) из инструкции.                                                                     |
| `o_rs2`              | 5 бит      | `out`         | Номер второго исходного регистра (RS2) из инструкции.                                                                     |
| `o_imm`              | 12 бит     | `out`         | Немедленное значение (imm), извлекаемое из инструкций типов `I` и `S`.                                                     |
| `o_rd`               | 5 бит      | `out`         | Номер регистра назначения (RD), в который записывается результат.                                                        |
| `o_read_to_LSU`      | 1 бит      | `out`         | Сигнал разрешения чтения для блока Load-Store Unit (LSU).                                                                 |
| `o_write_to_LSU`     | 1 бит      | `out`         | Сигнал разрешения записи для блока Load-Store Unit (LSU).                                                                 |
| `o_LSU_code`         | 17 бит     | `out`         | Код операции для блока LSU, формируется на основе полей инструкции (funct3, funct7 и opcode).                             |
| `reg_stage2_LSU_0`   | 6 бит      | Внутренний    | Внутренний регистр для хранения промежуточных данных (например, номера регистра назначения и флагов LSU).                 |
| `reg_stage2_LSU_1`   | 6 бит      | Внутренний    | Второй внутренний регистр для передачи данных между тактами (используется для операций с LSU).                             |

| **Тактовый цикл** | **Условие**                | **Действие**                                                                                  |
|--------------------|----------------------------|----------------------------------------------------------------------------------------------|
| **Сброс**         | `i_rst = 1`               | - Все выходные сигналы (`o_*`) сбрасываются в `0`.                                            |
|                    |                            | - Внутренние регистры (`reg_stage2_LSU_0`, `reg_stage2_LSU_1`) сбрасываются в `0`.           |
| **Тактовый цикл 1** | `rising_edge(i_clk)`       | - Декодируется инструкция `i_instr` для определения операционного кода (`opcode`).           |
|                    |                            | - Проверяется тип инструкции:                                                                |
|                    |                            |   - `0110011` → R-type.                                                                      |
|                    |                            |   - `0000011`, `0010011` → I-type.                                                          |
|                    |                            |   - `0100011` → S-type.                                                                      |
|                    |                            | - Если инструкция не соответствует известным типам, сбрасываются флаги (`o_r_type`, `o_i_type`, `o_s_type`). |
| **Тактовый цикл 2** | `rising_edge(i_clk)`       | **Обработка инструкции в зависимости от типа:**                                              |
|                    | **R-type (`opcode = 0110011`)** | - Устанавливается флаг `o_r_type = 1`.                                                      |
|                    |                            | - Извлекаются значения:                                                                      |
|                    |                            |   - `o_rs1` (номер первого источника).                                                      |
|                    |                            |   - `o_rs2` (номер второго источника).                                                      |
|                    |                            |   - `o_rd` (номер регистра назначения) — сохраняется в `reg_stage2_LSU_0`.                  |
|                    |                            | - Формируется код LSU (`o_LSU_code`) из `funct3`, `funct7`, `opcode`.                        |
|                    | **I-type (`opcode = 0000011/0010011`)** | - Устанавливается флаг `o_i_type = 1`.                                                      |
|                    |                            | - Извлекаются значения:                                                                      |
|                    |                            |   - `o_rs1` (номер источника).                                                              |
|                    |                            |   - `o_imm` (немедленное значение).                                                         |
|                    |                            | - Формируется код LSU (`o_LSU_code`).                                                       |
|                    | **S-type (`opcode = 0100011`)** | - Устанавливается флаг `o_s_type = 1`.                                                      |
|                    |                            | - Извлекаются значения:                                                                      |
|                    |                            |   - `o_rs1` и `o_rs2` (номера регистров источников).                                         |
|                    |                            |   - `o_imm` (смещение, сформированное из младших и старших бит инструкции).                  |
| **Тактовый цикл 3** | `rising_edge(i_clk)`       | - Обновляется содержимое регистров:                                                         |
|                    |                            |   - Данные из `reg_stage2_LSU_0` передаются в `reg_stage2_LSU_1`.                            |
|                    |                            | - Формируются управляющие сигналы для LSU:                                                  |
|                    |                            |   - `o_write_to_LSU` устанавливается на основе старшего бита `reg_stage2_LSU_1`.             |
|                    |                            |   - `o_rd` обновляется из младших бит `reg_stage2_LSU_1`.                                    |
